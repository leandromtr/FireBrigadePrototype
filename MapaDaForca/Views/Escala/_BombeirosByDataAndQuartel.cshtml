@using MapaDaForca.Helper;
@model IEnumerable<Escala>


<div class="card m-b-20 bombeiroEscalaSection">
    <div class="card-body">
        <h5 class="mt-0 header-title">Escala de <span id="dtEscalaList"></span> do quartel <span id="quartelList"></span></h5>
        <br />

        <!-- Nav tabs -->
        <ul class="nav nav-tabs nav-tabs-custom nav-justified" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#periodoDiurno" role="tab">Período Diúrno</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#periodoNoturno" role="tab">Período Noturno</a>
            </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div class="tab-pane active p-3" id="periodoDiurno" role="tabpanel">
                @*<div id="accordion">
                    <div class="card mb-1">
                        <div class="card-header p-3" id="headingTwo">
                            <h6 class="m-0 font-14">
                                <a href="#collapseTwo" class="text-dark collapsed" data-toggle="collapse"
                                   aria-expanded="false"
                                   aria-controls="collapseTwo">
                                    Resumo
                                </a>
                            </h6>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo"
                             data-parent="#accordion">
                            <div class="card-body">
                            
                            </div>
                        </div>
                    </div>
                </div>*@
                <table class="table table-striped mb-0">
                    <thead>
                        <tr>
                            <th style="width: 20%;">Nº Mecanogr.</th>
                            <th style="width: 25%;">Bombeiro</th>
                            <th style="width: 25%;">Função</th>
                            <th style="width: 30%;">Posto</th>
                        </tr>
                    </thead>
                    @{ foreach (var escala in Model.Where(x => x.PeriodoDiurno == true).OrderBy(x => x.Bombeiro.Nome))
                        {
                            <tr class="escalaLine" data-escalaLineiD="@escala.Id">
                                <td style="width: 20%;">@escala.Bombeiro.NumeroMecanografico</td>
                                <td style="width: 25%;"><a href=@Url.Action("Detail", "Bombeiro", new { @id = escala.BombeiroId })>@escala.Bombeiro.Nome</a></td>
                                <td style="width: 25%;">@escala.Funcao.Nome</td>
                                <td style="width: 30%;">@escala.Bombeiro.Posto.Nome</td>
                            </tr>
                        }
                    }
                </table>
            </div>
            <div class="tab-pane p-3" id="periodoNoturno" role="tabpanel">
                <table class="table table-striped mb-0">
                    <thead>
                        <tr>
                            <th style="width: 20%;">Nº Mecanogr.</th>
                            <th style="width: 25%;">Bombeiro</th>
                            <th style="width: 25%;">Função</th>
                            <th style="width: 20%;">Posto</th>
                        </tr>
                    </thead>
                    @{ foreach (var escala in Model.Where(x => x.PeriodoDiurno == false).OrderBy(x => x.Bombeiro.Nome))
                        {
                            <tr class="escalaLine" data-escalaLineiD="@escala.Id">
                                <td style="width: 20%;">@escala.Bombeiro.NumeroMecanografico</td>
                                <td style="width: 25%;"><a href=@Url.Action("Detail", "Bombeiro", new { @id = escala.BombeiroId })>@escala.Bombeiro.Nome</a></td>
                                <td style="width: 25%;">@escala.Funcao.Nome</td>
                                <td style="width: 30%;">@escala.Bombeiro.Posto.Nome</td>
                            </tr>
                        }
                    }
                </table>
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function () {
        $("#dtEscalaList").text($("#dtEscala").val());
        $("#quartelList").text($("#quartelId option:selected").text());
    });
</script>